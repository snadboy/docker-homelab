services:
  uptime-kuma:
    image: louislam/uptime-kuma:latest
    container_name: uptime-kuma
    labels:
      - "snadboy.revp.3001.domain=uptime-kuma.isnadboy.com"
    environment:
      - TZ=America/Chicago
    user: "1000:1000"
    entrypoint: ["/usr/bin/dumb-init", "--", "node", "server/server.js"]
    volumes:
      # Use named volume for SQLite - CIFS/network storage causes locking issues
      - uptime-kuma-data:/app/data
    ports:
      - 3001:3001 # <Host Port>:<Container Port>
    restart: unless-stopped
    networks:
      - app_network

volumes:
  uptime-kuma-data:
    driver: local
    # Data stored locally for reliable SQLite file locking
    # Backup to NAS separately if needed

networks:
  app_network:
    name: ${NETWORK_NAME:-uptime-kuma_default}
    external: ${NETWORK_EXTERNAL:-false}
