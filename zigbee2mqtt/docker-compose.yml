services:
  zigbee2mqtt:  # service key must be static; env vars aren't allowed here
    container_name: "${Z2M_NAME:-zigbee2mqtt}"
    hostname: "${Z2M_NAME:-zigbee2mqtt}"
    labels:
      # revp uses container's internal port (always 8080), Z2M_PORT is only for host mapping
      - "snadboy.revp.8080.domain=${Z2M_NAME:-zigbee2mqtt}.isnadboy.com"
    image: koenkk/zigbee2mqtt
    restart: unless-stopped
    volumes:
      - /mnt/docker/zigbee2mqtt/${Z2M_NAME:-zigbee2mqtt}/app-data:/app/data
      # - /run/udev:/run/udev:ro
      # network_mode: host
    ports:
      # Frontend port (host:container)
      - "${Z2M_PORT:-8080}:8080"
    environment:
      - TZ=America/Chicago