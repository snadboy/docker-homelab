services:
  placeholdarr:
    image: ghcr.io/theindiearmy/placeholdarr:queue_monitoring-latest
    container_name: placeholdarr
    restart: unless-stopped
    labels:
      - "snadboy.revp.8000.domain=placeholdarr.isnadboy.com"
    environment:
      # Server Configuration
      - PLACEHOLDARR_HOST=0.0.0.0
      - PLACEHOLDARR_PORT=8000
      - PLACEHOLDARR_DEBUG=False
      - PLACEHOLDARR_LOG_LEVEL=INFO
      - WORKER_COUNT=4

      # Plex Configuration
      - PLEX_URL=http://host-plex.isnadboy.com:32400
      - PLEX_TOKEN=${PLEX_TOKEN}
      - PLEX_TV_SECTION_ID=2
      - PLEX_MOVIE_SECTION_ID=1

      # Radarr Configuration
      - RADARR_URL=http://host-arr.isnadboy.com:7878/api/v3
      - RADARR_API_KEY=681c54f9962e42a8b6aa5082c074b939

      # Sonarr Configuration
      - SONARR_URL=http://host-arr.isnadboy.com:8989/api/v3
      - SONARR_API_KEY=36261001e1ac41d185b42028228b8f09

      # Library Paths (where placeholders will be created)
      - MOVIE_LIBRARY_FOLDER=/placeholders/movies
      - TV_LIBRARY_FOLDER=/placeholders/tv

      # Application Data
      - APP_DATA_DIR=/config
      - DUMMY_FILE_PATH=/dummy/placeholder.mp4
      - PLACEHOLDER_STRATEGY=hardlink

      # Queue Management
      - TV_PLAY_MODE=episode
      - MAX_MONITOR_TIME=120
      - CHECK_INTERVAL=3
      - CHECK_MAX_ATTEMPTS=1000

    volumes:
      # Placeholder output directories
      - /mnt/media/placeholders/tv:/placeholders/tv
      - /mnt/media/placeholders/movies:/placeholders/movies

      # Dummy video files
      - /home/snadboy/placeholdarr-dummy:/dummy

      # Config persistence
      - placeholdarr-config:/config

    ports:
      - 8000:8000

volumes:
  placeholdarr-config:
